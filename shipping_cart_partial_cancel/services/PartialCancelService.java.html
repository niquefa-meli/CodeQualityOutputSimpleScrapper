<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">

    <title>Code Quality Report</title>
    <meta name="description" content="Code Quality Report">
    <meta name="author" content="Quality Tooling Team">

    <!-- CSS only -->
    <link href="/Users/rniquefa/fury_shipping-cart-partial-cancel/code_quality_service/resources/bootstrap/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/Users/rniquefa/fury_shipping-cart-partial-cancel/code_quality_service/resources/prism/prism.css" rel="stylesheet" type="text/css"/>
</head>

<body>
<script src="/Users/rniquefa/fury_shipping-cart-partial-cancel/code_quality_service/resources/bootstrap/bootstrap.bundle.min.js" type="text/javascript"></script>
<script src="/Users/rniquefa/fury_shipping-cart-partial-cancel/code_quality_service/resources/prism/prism.js"></script>

<div class="container">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href=/Users/rniquefa/fury_shipping-cart-partial-cancel/code_quality_service/root.html>root</a></li>
                    <li class="breadcrumb-item"><a href=/Users/rniquefa/fury_shipping-cart-partial-cancel/code_quality_service/src/src.html>src</a></li>
                    <li class="breadcrumb-item"><a href=/Users/rniquefa/fury_shipping-cart-partial-cancel/code_quality_service/src/main/main.html>main</a></li>
                    <li class="breadcrumb-item"><a href=/Users/rniquefa/fury_shipping-cart-partial-cancel/code_quality_service/src/main/java/java.html>java</a></li>
                    <li class="breadcrumb-item"><a href=/Users/rniquefa/fury_shipping-cart-partial-cancel/code_quality_service/src/main/java/com/com.html>com</a></li>
                    <li class="breadcrumb-item"><a href=/Users/rniquefa/fury_shipping-cart-partial-cancel/code_quality_service/src/main/java/com/mercadolibre/mercadolibre.html>mercadolibre</a></li>
                    <li class="breadcrumb-item"><a href=/Users/rniquefa/fury_shipping-cart-partial-cancel/code_quality_service/src/main/java/com/mercadolibre/shipping_cart_partial_cancel/shipping_cart_partial_cancel.html>shipping_cart_partial_cancel</a></li>
                    <li class="breadcrumb-item active" aria-current="page"><a href=/Users/rniquefa/fury_shipping-cart-partial-cancel/code_quality_service/src/main/java/com/mercadolibre/shipping_cart_partial_cancel/services/services.html>services</a></li>
        </ol>
    </nav>
</div>

<div class="container">
    <h2>PartialCancelService.java</h2>
    <span class="badge bg-warning text-dark">Total issues: 37</span>
    <span class="badge bg-warning text-dark">Complexity: 5</span>
    <hr>
</div>

<div class="container">
    <pre class="language-java line-numbers">
            <code>package com.mercadolibre.shipping_cart_partial_cancel.services;</code>
                    <span class="badge bg-warning text-dark">Package name 'com.mercadolibre.shipping_cart_partial_cancel.services' must match pattern '^[a-z]+(\.[a-z][a-z0-9]*)*$'.</span>
            <code> </code>
            <code>import static com.mercadolibre.shipping_cart_partial_cancel.util.BuildPackConfigUtils.logUnexpectedError;</code>
            <code> </code>
            <code>import com.mercadolibre.shipping_cart_partial_cancel.dtos.input.CancelRequest;</code>
            <code>import com.mercadolibre.shipping_cart_partial_cancel.dtos.input.PurchaseItem;</code>
            <code>import com.mercadolibre.shipping_cart_partial_cancel.dtos.output.CancellationResult;</code>
            <code>import com.mercadolibre.shipping_cart_partial_cancel.dtos.output.PackConfig;</code>
            <code>import com.mercadolibre.shipping_cart_partial_cancel.dtos.process.CalculatorSnapshot;</code>
            <code>import com.mercadolibre.shipping_cart_partial_cancel.factories.CalculatorRequestFactory;</code>
            <code>import com.mercadolibre.shipping_cart_partial_cancel.factories.PackConfigFactory;</code>
            <code>import lombok.RequiredArgsConstructor;</code>
            <code>import lombok.extern.log4j.Log4j2;</code>
            <code>import org.springframework.stereotype.Service;</code>
            <code> </code>
            <code>import java.util.List;</code>
                    <span class="badge bg-warning text-dark">Extra separation in import group before 'java.util.List'</span>
                    <span class="badge bg-warning text-dark">Wrong lexicographical order for 'java.util.List' import. Should be before 'org.springframework.stereotype.Service'.</span>
            <code> </code>
            <code>/**</code>
            <code> * Given an item to cancel in a given snapshot, it recalculates the pack</code>
            <code> * price and return the difference of prices between old and new pack,</code>
            <code> * along with the new pack generated.</code>
            <code> *</code>
            <code> * @see CancellationResult</code>
            <code> */</code>
            <code>@Log4j2</code>
            <code>@Service</code>
            <code>@RequiredArgsConstructor</code>
            <code>public class PartialCancelService {</code>
            <code> </code>
            <code>    private final SnapshotService snapshotService;</code>
                    <span class="badge bg-warning text-dark">'member def modifier' has incorrect indentation level 4, expected level should be 2.</span>
            <code>    private final CalculatorService calculatorService;</code>
                    <span class="badge bg-warning text-dark">'member def modifier' has incorrect indentation level 4, expected level should be 2.</span>
            <code>    private final PackConfigFactory packConfigFactory;</code>
                    <span class="badge bg-warning text-dark">'member def modifier' has incorrect indentation level 4, expected level should be 2.</span>
            <code>    private final CalculatorRequestFactory calculatorRequestFactory;</code>
                    <span class="badge bg-warning text-dark">'member def modifier' has incorrect indentation level 4, expected level should be 2.</span>
            <code> </code>
            <code> </code>
            <code>    public CancellationResult calculatePartialCancellation(CancelRequest cancelRequest) {</code>
                    <span class="badge bg-warning text-dark">'method def modifier' has incorrect indentation level 4, expected level should be 2.</span>
                    <span class="badge bg-warning text-dark">Missing a Javadoc comment.</span>
            <code>        try {</code>
                    <span class="badge bg-warning text-dark">'try' has incorrect indentation level 8, expected level should be 4.</span>
            <code>            var snapshot = snapshotService.findById(cancelRequest.getSnapshotId());</code>
                    <span class="badge bg-warning text-dark">'try' child has incorrect indentation level 12, expected level should be 6.</span>
            <code>            var packConfig = packConfigFactory.buildPackConfig(snapshot, cancelRequest.getOptionHash(), cancelRequest.getAddressId());</code>
                    <span class="badge bg-warning text-dark">'try' child has incorrect indentation level 12, expected level should be 6.</span>
            <code>            var newSnapshot = performCalculatorRequest(cancelRequest.isShipmentCreated(), packConfig,</code>
                    <span class="badge bg-warning text-dark">'try' child has incorrect indentation level 12, expected level should be 6.</span>
            <code>                    cancelRequest.getNonConflictingItems());</code>
            <code>            var newPackConfig = packConfigFactory.buildPackConfig(newSnapshot,</code>
                    <span class="badge bg-warning text-dark">'try' child has incorrect indentation level 12, expected level should be 6.</span>
            <code>                                                                            cancelRequest.getAddressId(),</code>
            <code>                                                                            cancelRequest.getShipmentId(),</code>
            <code>                                                                            cancelRequest.isShipmentCreated());</code>
            <code>            var trashPackConfig = packConfigFactory.buildTrashPackConfig(packConfig, newPackConfig);</code>
                    <span class="badge bg-warning text-dark">'try' child has incorrect indentation level 12, expected level should be 6.</span>
            <code>            return CancellationResult.builder()</code>
                    <span class="badge bg-warning text-dark">'try' child has incorrect indentation level 12, expected level should be 6.</span>
            <code>                    .packConfig(newPackConfig)</code>
            <code>                    .trashPackConfig(trashPackConfig)</code>
            <code>                    .build();</code>
            <code> </code>
            <code>        } catch (Throwable error) {</code>
                    <span class="badge bg-warning text-dark">'try rcurly' has incorrect indentation level 8, expected level should be 4.</span>
            <code>            logUnexpectedError("Calculating partial cancellation", error);</code>
                    <span class="badge bg-warning text-dark">'catch' child has incorrect indentation level 12, expected level should be 6.</span>
            <code>            throw error;</code>
                    <span class="badge bg-warning text-dark">'catch' child has incorrect indentation level 12, expected level should be 6.</span>
            <code>        }</code>
                    <span class="badge bg-warning text-dark">'catch rcurly' has incorrect indentation level 8, expected level should be 4.</span>
            <code>    }</code>
                    <span class="badge bg-warning text-dark">'method def rcurly' has incorrect indentation level 4, expected level should be 2.</span>
            <code> </code>
            <code>    /**</code>
            <code>     * Decides which method to call according to the flag shipmentCreated and then calls it.</code>
            <code>     * @param shipmentCreated true when is a post shipment flow.</code>
            <code>     * @param packConfig pack config to build the calculator request.</code>
            <code>     * @param nonConflictingItems list of non conflicting items</code>
            <code>     * @return the snapshot retrieved from the calculator service after calling the adequate calculator service.</code>
            <code>     */</code>
            <code>    public CalculatorSnapshot performCalculatorRequest(boolean shipmentCreated, PackConfig packConfig,</code>
                    <span class="badge bg-warning text-dark">'method def modifier' has incorrect indentation level 4, expected level should be 2.</span>
            <code>                                                       List<PurchaseItem> nonConflictingItems) {</code>
            <code>        CalculatorSnapshot snapshot;</code>
                    <span class="badge bg-warning text-dark">'method def' child has incorrect indentation level 8, expected level should be 4.</span>
            <code>        try {</code>
                    <span class="badge bg-warning text-dark">'try' has incorrect indentation level 8, expected level should be 4.</span>
            <code>            if (shipmentCreated) {</code>
                    <span class="badge bg-warning text-dark">'if' has incorrect indentation level 12, expected level should be 6.</span>
            <code>                var request = calculatorRequestFactory.buildPostShipmentRequest(packConfig, nonConflictingItems);</code>
                    <span class="badge bg-warning text-dark">'if' child has incorrect indentation level 16, expected level should be 8.</span>
            <code>                snapshot = calculatorService.performPostShipmentRequest(request);</code>
                    <span class="badge bg-warning text-dark">'if' child has incorrect indentation level 16, expected level should be 8.</span>
            <code>            } else {</code>
                    <span class="badge bg-warning text-dark">'if rcurly' has incorrect indentation level 12, expected level should be 6.</span>
            <code>                var request = calculatorRequestFactory.buildPreShipmentRequest(packConfig, nonConflictingItems);</code>
                    <span class="badge bg-warning text-dark">'else' child has incorrect indentation level 16, expected level should be 8.</span>
            <code>                snapshot = calculatorService.performPreShipmentRequest(request);</code>
                    <span class="badge bg-warning text-dark">'else' child has incorrect indentation level 16, expected level should be 8.</span>
            <code>            }</code>
                    <span class="badge bg-warning text-dark">'else rcurly' has incorrect indentation level 12, expected level should be 6.</span>
            <code>            return snapshot;</code>
                    <span class="badge bg-warning text-dark">'try' child has incorrect indentation level 12, expected level should be 6.</span>
            <code>        } catch (Throwable error) {</code>
                    <span class="badge bg-warning text-dark">'try rcurly' has incorrect indentation level 8, expected level should be 4.</span>
            <code>            logUnexpectedError("Performing calculator request error", error);</code>
                    <span class="badge bg-warning text-dark">'catch' child has incorrect indentation level 12, expected level should be 6.</span>
            <code>            throw error;</code>
                    <span class="badge bg-warning text-dark">'catch' child has incorrect indentation level 12, expected level should be 6.</span>
            <code>        }</code>
                    <span class="badge bg-warning text-dark">'catch rcurly' has incorrect indentation level 8, expected level should be 4.</span>
            <code>    }</code>
                    <span class="badge bg-warning text-dark">'method def rcurly' has incorrect indentation level 4, expected level should be 2.</span>
            <code>}</code>
    </pre>
</div>
</body>
</html>